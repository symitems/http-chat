"use strict";(self.webpackChunkhttp_chat=self.webpackChunkhttp_chat||[]).push([[27],{8027:function(e,t,n){n.r(t),n.d(t,{default:function(){return u}});var s=n(9439),l=(n(3508),n(2791)),o=n(7689),i=n(4569),r=n.n(i),a=n(1224),c=n(184);function u(){var e="https://http-chat-api.onrender.com",t=(0,o.s0)(),n=(0,l.useState)([]),i=(0,s.Z)(n,2),u=i[0],d=i[1],h=(0,l.useState)({}),f=(0,s.Z)(h,2),g=f[0],x=f[1],j=(0,l.useState)(),p=(0,s.Z)(j,2),b=p[0],m=p[1],v=(0,l.useRef)(),y=(0,l.useRef)(),C=(0,a.a)().logout,k=(0,l.useCallback)((function(){C(),setTimeout((function(){t("/login")}),100)}),[C,t]);(0,l.useEffect)((function(){var t=setInterval((function(){r().get(e+"/messages/").then((function(e){console.log(e),d(e.data)})).catch((function(e){401===e.response.status&&k()}))}),3e3);return function(){return clearInterval(t)}}),[e,k]);var T=function(e){if("JST"===b){e+="Z";var t=Date.parse(e.replace(/-/g,"/").replace(/T/," ")),n=new Date(t);return[n.getFullYear(),("0"+(n.getMonth()+1)).slice(-2),("0"+n.getDate()).slice(-2)].join("-")+" "+[("0"+n.getHours()).slice(-2),("0"+n.getMinutes()).slice(-2),("0"+n.getSeconds()).slice(-2)].join(":")}return e};return(0,c.jsxs)("div",{style:{margin:"auto",width:"90%"},children:[(0,c.jsxs)("div",{style:{display:"flex",WebkitBoxPack:"justify",MozBoxPack:"justify",MsFlexPack:"justify",WebkitJustifyContent:"space-between",justifyContent:"space-between"},children:[(0,c.jsx)("div",{children:(0,c.jsxs)("h1",{children:["HTTP CHAT"," ",(0,c.jsx)("small",{children:(0,c.jsx)("small",{children:"by iwsh"})})]})}),(0,c.jsxs)("div",{style:{display:"flex",alignItems:"center"},children:[(0,c.jsx)("select",{style:{fontSize:"16px"},name:"timezone",defaultValue:"UTC",ref:y,onChange:function(e){m(e.target.value)},children:[{value:"UTC",label:"UTC"},{value:"JST",label:"JST"}].map((function(e){return(0,c.jsx)("option",{value:e.value,children:e.label})}))}),(0,c.jsx)("button",{onClick:k,children:"Logout"})]})]}),(0,c.jsx)("hr",{}),(0,c.jsxs)("div",{children:[(0,c.jsx)("table",{cellPadding:5,children:(0,c.jsx)("tbody",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{valign:"middle",children:"Message:"}),(0,c.jsx)("td",{children:(0,c.jsx)("textarea",{style:{fontSize:"16px"},ref:v,cols:"22",rows:"5",onChange:function(e){x({text:e.target.value})},required:!0})})]})})}),(0,c.jsx)("button",{type:"submit",onClick:function(){if(console.log(g.text),console.log(g.username),g.text){var t={text:g.text};r().post(e+"/messages/",t).then((function(e){console.log(e),d(e.data)})).catch((function(e){console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),console.log("Error",e.message)})),v.current.value="",x({text:""})}},children:(0,c.jsx)("big",{children:"Submit"})}),(0,c.jsx)("hr",{})]}),(0,c.jsx)("button",{type:"submit",onClick:function(){r().delete(e+"/messages/").then((function(e){console.log(e),d(e.data)})).catch((function(e){console.log(e.response.data),console.log(e.response.status),console.log(e.response.headers),console.log("Error",e.message)}))},children:(0,c.jsx)("big",{children:"Clear All"})}),u.map((function(e){return(0,c.jsxs)("div",{children:[(0,c.jsxs)("div",{style:{marginTop:15},children:[(0,c.jsx)("b",{children:(0,c.jsx)("big",{children:e.username})})," ",(0,c.jsxs)("small",{children:[" - [ ",T(e.created_at)," ]"]})]}),(0,c.jsx)("div",{style:{backgroundColor:"#ffffff",padding:5,marginLeft:"1%",marginTop:5,marginRight:"5%",alignSelf:"flex-end",borderRadius:15,display:"inline-block",border:"1.5px solid",borderColor:"#b0e0e6"},children:e.text})]})}))]})}r().defaults.withCredentials=!0},3508:function(){}}]);
//# sourceMappingURL=27.e64e3a7d.chunk.js.map